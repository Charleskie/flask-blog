{% extends "base.html" %}

{% block title %}首页 - 我的个人网站{% endblock %}

{% block content %}
<!-- 英雄区域 -->
<div class="hero-section text-center py-5 mb-5 fade-in-up">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <h1 class="display-4 fw-bold mb-4 gradient-text">Welcome</h1>
            <p class="lead mb-4">Hi! 欢迎光临我的小站。</p>
            
            <!-- 首页搜索区域 -->
            <div class="global-search">
                <form method="GET" action="{{ url_for('main.search') }}">
                    <input type="text" class="search-input" name="q" placeholder="搜索文章、项目、技术内容..." 
                           value="{{ request.args.get('q', '') }}" id="homeSearchInput">
                    <button type="submit" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
                <div class="search-suggestions" id="homeSearchSuggestions" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>

<!-- 特色内容 -->
<div class="row mb-5">
    <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm hover-lift slide-in-left">
            <div class="card-body text-center">
                <i class="fas fa-code fa-3x text-primary mb-3"></i>
                <h5 class="card-title">项目展示</h5>
                <p class="card-text">查看我开发的各种项目，包括Web应用、移动应用和其他技术作品。</p>
                <a href="{{ url_for('main.projects') }}" class="btn btn-outline-primary">浏览项目</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm hover-lift fade-in-up">
            <div class="card-body text-center">
                <i class="fas fa-blog fa-3x text-success mb-3"></i>
                <h5 class="card-title">技术博客</h5>
                <p class="card-text">分享我的技术心得、学习笔记和行业见解。</p>
                                    <a href="{{ url_for('main.blog') }}" class="btn btn-outline-success">阅读博客</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm hover-lift slide-in-right">
            <div class="card-body text-center">
                <i class="fas fa-envelope fa-3x text-info mb-3"></i>
                <h5 class="card-title">联系我</h5>
                <p class="card-text">有任何问题或合作意向？欢迎随时联系我。</p>
                                    <a href="{{ url_for('main.contact') }}" class="btn btn-outline-info">联系我</a>
            </div>
        </div>
    </div>
</div>

<!-- 最新项目预览 -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">最新项目</h2>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">项目名称 1</h5>
                        <p class="card-text">这是一个示例项目描述，展示了项目的技术栈和功能特点。</p>
                        <div class="d-flex gap-2">
                            <span class="badge bg-primary">Python</span>
                            <span class="badge bg-secondary">Flask</span>
                            <span class="badge bg-info">Bootstrap</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">项目名称 2</h5>
                        <p class="card-text">另一个示例项目，展示了不同的技术组合和实现方案。</p>
                        <div class="d-flex gap-2">
                            <span class="badge bg-primary">JavaScript</span>
                            <span class="badge bg-secondary">React</span>
                            <span class="badge bg-info">Node.js</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 版本更新记录 -->
{% if versions %}
<div class="row mb-5">
    <div class="col-12">
        <div class="version-timeline-header">
            <h2 class="gradient-text">版本更新记录</h2>
<!--            <a href="{{ url_for('version.get_versions') }}" class="view-full-timeline">-->
<!--                查看完整记录 →-->
<!--            </a>-->
        </div>
        <div class="horizontal-timeline-container">
            <div class="timeline-scroll-wrapper">
                <div class="horizontal-timeline">
                    {% for version in versions %}
                    <div class="timeline-event">
                        <div class="timeline-date">{{ version.release_date.strftime('%Y年%m月') if version.release_date else '未知日期' }}</div>
                        <div class="timeline-icon {% if '初始' in version.title or 'v1.0' in version.version_number %}icon-rocket{% elif '交互' in version.title or '评论' in version.title %}icon-comments{% elif '回复' in version.title %}icon-reply{% elif '版本' in version.title or '管理' in version.title %}icon-cog{% elif 'UI' in version.title or '界面' in version.title %}icon-palette{% elif '功能' in version.title %}icon-star{% else %}icon-default{% endif %}">
                            {% if '初始' in version.title or 'v1.0' in version.version_number %}
                                <i class="fas fa-rocket"></i>
                            {% elif '交互' in version.title or '评论' in version.title %}
                                <i class="fas fa-comments"></i>
                            {% elif '回复' in version.title %}
                                <i class="fas fa-reply"></i>
                            {% elif '版本' in version.title or '管理' in version.title %}
                                <i class="fas fa-cog"></i>
                            {% elif 'UI' in version.title or '界面' in version.title %}
                                <i class="fas fa-palette"></i>
                            {% elif '功能' in version.title %}
                                <i class="fas fa-star"></i>
                            {% else %}
                                <i class="fas fa-code-branch"></i>
                            {% endif %}
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-title">{{ version.title }}</div>
                            <div class="timeline-description">{{ version.description[:50] }}{% if version.description|length > 50 %}...{% endif %}</div>
                            <div class="version-badge {% if '初始' in version.title or 'v1.0' in version.version_number %}badge-rocket{% elif '交互' in version.title or '评论' in version.title %}badge-comments{% elif '回复' in version.title %}badge-reply{% elif '版本' in version.title or '管理' in version.title %}badge-cog{% elif 'UI' in version.title or '界面' in version.title %}badge-palette{% elif '功能' in version.title %}badge-star{% else %}badge-default{% endif %}">{{ version.version_number }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="timeline-controls">
                <button class="timeline-btn timeline-prev" onclick="scrollTimeline(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="timeline-btn timeline-next" onclick="scrollTimeline(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>
{% endif %}

<script>
// 时间线滑动功能
function scrollTimeline(direction) {
    const timeline = document.querySelector('.timeline-scroll-wrapper');
    if (!timeline) return;
    
    const scrollAmount = 300; // 每次滚动的距离
    const currentScroll = timeline.scrollLeft;
    const newScroll = currentScroll + (direction * scrollAmount);
    
    timeline.scrollTo({
        left: newScroll,
        behavior: 'smooth'
    });
}

// 触摸滑动支持
document.addEventListener('DOMContentLoaded', function() {
    const timeline = document.querySelector('.timeline-scroll-wrapper');
    if (!timeline) return;
    
    let isDown = false;
    let startX;
    let scrollLeft;
    
    timeline.addEventListener('mousedown', (e) => {
        isDown = true;
        timeline.classList.add('active');
        startX = e.pageX - timeline.offsetLeft;
        scrollLeft = timeline.scrollLeft;
    });
    
    timeline.addEventListener('mouseleave', () => {
        isDown = false;
        timeline.classList.remove('active');
    });
    
    timeline.addEventListener('mouseup', () => {
        isDown = false;
        timeline.classList.remove('active');
    });
    
    timeline.addEventListener('mousemove', (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - timeline.offsetLeft;
        const walk = (x - startX) * 2;
        timeline.scrollLeft = scrollLeft - walk;
    });
    
    // 触摸事件支持
    let touchStartX = 0;
    let touchStartY = 0;
    
    timeline.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
    });
    
    timeline.addEventListener('touchmove', (e) => {
        if (!touchStartX || !touchStartY) return;
        
        const touchCurrentX = e.touches[0].clientX;
        const touchCurrentY = e.touches[0].clientY;
        
        const diffX = touchStartX - touchCurrentX;
        const diffY = touchStartY - touchCurrentY;
        
        // 如果是水平滑动
        if (Math.abs(diffX) > Math.abs(diffY)) {
            e.preventDefault();
            timeline.scrollLeft += diffX;
            touchStartX = touchCurrentX;
        }
    });
    
    timeline.addEventListener('touchend', () => {
        touchStartX = 0;
        touchStartY = 0;
    });
});
</script>

<!-- 技能展示 -->
<div class="row">
    <div class="col-12">
        <h2 class="text-center mb-4 gradient-text">技术技能</h2>
        <div class="row text-center">
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fab fa-java fa-3x text-primary mb-2"></i>
                    <h5>Java</h5>
                    <div class="progress">
                        <div class="progress-bar" style="width: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fas fa-bolt fa-3x text-primary mb-2"></i>
                    <h5>Spark</h5>
                    <div class="progress">
                        <div class="progress-bar" style="width: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fas fa-stream fa-3x text-primary mb-2"></i>
                    <h5>Flink</h5>
                    <div class="progress">
                        <div class="progress-bar" style="width: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fas fa-exchange-alt fa-3x text-primary mb-2"></i>
                    <h5>Kafka</h5>
                    <div class="progress">
                        <div class="progress-bar" style="width: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fab fa-python fa-3x text-primary mb-2"></i>
                    <h5>Python</h5>
                    <div class="progress">
                        <div class="progress-bar" style="width: 85%"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fab fa-js-square fa-3x text-warning mb-2"></i>
                    <h5>JavaScript</h5>
                    <div class="progress">
                        <div class="progress-bar bg-warning" style="width: 80%"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fab fa-react fa-3x text-info mb-2"></i>
                    <h5>React</h5>
                    <div class="progress">
                        <div class="progress-bar bg-info" style="width: 90%"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3 mb-3">
                <div class="skill-item hover-lift scale-in">
                    <i class="fab fa-git-alt fa-3x text-danger mb-2"></i>
                    <h5>Git</h5>
                    <div class="progress">
                        <div class="progress-bar bg-danger" style="width: 95%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 